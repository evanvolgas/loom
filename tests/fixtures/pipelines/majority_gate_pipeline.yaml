name: majority_quality_gate_test
version: 1.0.0
description: Pipeline with majority_pass quality gate for testing

extract:
  source: tests/fixtures/data/sample.parquet
  source_type: parquet
  batch_size: 10

transform:
  prompt: tests/fixtures/prompts/classify_sentiment.txt
  model: gpt-4o-mini
  provider: openai
  batch_size: 5
  temperature: 0.7
  timeout: 60.0

evaluate:
  evaluators:
    - name: semantic
      type: semantic
      threshold: 0.8
      weight: 1.0
    - name: criteria1
      type: custom_criteria
      threshold: 0.75
      weight: 1.0
      criteria: "Is the sentiment classification accurate?"
    - name: criteria2
      type: custom_criteria
      threshold: 0.7
      weight: 1.0
      criteria: "Is the language professional?"
  quality_gate: majority_pass
  reference_field: expected_sentiment
  timeout: 30.0

load:
  destination: tests/fixtures/output/majority_results.parquet
  destination_type: parquet
  mode: overwrite
  batch_size: 10
